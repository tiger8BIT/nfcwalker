micronaut:
  application:
    name: nfcwalker
  test-resources:
    enabled: false
  security:
    enabled: true
    authentication: bearer
    token:
      jwt:
        roles-claim: roles
        signatures:
          secret:
            default:
              # Named secret entry (default) with explicit value for verification
              secret: 0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
              generator:
                secret: 0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# Test-only toggles
test:
  security:
    rule:
      enabled: false

datasources:
  default:
    url: "jdbc:tc:postgresql:15:///testdb"
    username: test
    password: test
    driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
    db-type: postgres

app:
  # Use a 32-byte (256-bit) secret for challenge signing in tests to satisfy HS256
  challenge:
    secret: 0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
    ttl-seconds: 60

# Enable debug logging for security to diagnose token validation issues during tests
logging:
  level:
    io.micronaut.security: DEBUG
    io.micronaut.security.token: DEBUG
    io.micronaut.security.token.jwt: DEBUG
